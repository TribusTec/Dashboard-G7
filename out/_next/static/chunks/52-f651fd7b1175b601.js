"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{434:function(e,t,r){r.d(t,{V:function(){return o}});var a=r(2265);function o(e){let{title:t}=e;return(0,a.useEffect)(()=>{document.title="UIDO | ".concat(t)},[t]),null}},75547:function(e,t,r){r.d(t,{i:function(){return l}});var a=r(57437),o=r(2265),i=r(99376),n=r(45478),s=r(51817);function l(e){let{children:t,requireAdmin:r=!0}=e,{user:l,isLoading:c,isAuthenticated:d}=(0,n.a)(),m=(0,i.useRouter)();return((0,o.useEffect)(()=>{if(!c&&(!d||r&&(null==l?void 0:l.role)!=="admin")){m.push("/");return}},[d,c,l,m,r]),c)?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(s.Z,{className:"w-8 h-8 animate-spin mx-auto text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Verificando autentica\xe7\xe3o..."})]})}):!d||r&&(null==l?void 0:l.role)!=="admin"?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(s.Z,{className:"w-8 h-8 animate-spin mx-auto text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Redirecionando..."})]})}):(0,a.jsx)(a.Fragment,{children:t})}},50269:function(e,t,r){r.d(t,{J:function(){return n}});var a=r(57437),o=r(69140),i=r(33804);function n(){return(0,a.jsx)(i.RM,{children:Array.from({length:5}).map((e,t)=>(0,a.jsxs)(i.SC,{children:[(0,a.jsxs)(i.pj,{className:"flex items-center gap-3",children:[(0,a.jsx)(o.O,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.O,{className:"h-4 w-32"}),(0,a.jsx)(o.O,{className:"h-3 w-24"})]})]}),(0,a.jsx)(i.pj,{children:(0,a.jsx)(o.O,{className:"h-4 w-48"})}),(0,a.jsx)(i.pj,{children:(0,a.jsx)(o.O,{className:"h-4 w-16"})}),(0,a.jsx)(i.pj,{children:(0,a.jsx)(o.O,{className:"h-4 w-32"})}),(0,a.jsx)(i.pj,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(o.O,{className:"h-2.5 w-2.5 rounded-full"}),(0,a.jsx)(o.O,{className:"h-4 w-20"})]})})]},t))})}},96246:function(e,t,r){r.d(t,{F$:function(){return l},Q5:function(){return c},qE:function(){return s}});var a=r(57437),o=r(2265),i=r(61146),n=r(93448);let s=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(i.fC,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...o})});s.displayName=i.fC.displayName;let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(i.Ee,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",r),...o})});l.displayName=i.Ee.displayName;let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(i.NY,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...o})});c.displayName=i.NY.displayName},69140:function(e,t,r){r.d(t,{O:function(){return i}});var a=r(57437),o=r(93448);function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("animate-pulse rounded-md bg-muted",t),...r})}},33804:function(e,t,r){r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return n},pj:function(){return m},ss:function(){return d},xD:function(){return s}});var a=r(57437),o=r(2265),i=r(93448);let n=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",r),...o})})});n.displayName="Table";let s=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",r),...o})});s.displayName="TableHeader";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",r),...o})});l.displayName="TableBody",o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...o})}).displayName="TableFooter";let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...o})});c.displayName="TableRow";let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...o})});d.displayName="TableHead";let m=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...o})});m.displayName="TableCell",o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",r),...o})}).displayName="TableCaption"},64381:function(e,t,r){r.d(t,{U:function(){return n}});var a=r(2265),o=r(17292),i=r(52395);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,[t,r]=(0,a.useState)([]),[n,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{s(!0);try{let t=(0,o.iH)(i.Fs,"users"),a=await (0,o.U2)(t);if(a.exists()){let t=a.val(),o=Object.entries(t).map(e=>{let[t,r]=e,a=r.points||0,o=0;if(r.createdAt){if("number"==typeof r.createdAt)o=r.createdAt;else if("string"==typeof r.createdAt){let e=Number.parseInt(r.createdAt);isNaN(e)||(o=e)}}return{id:t,nome:r.nome||"Sem Nome",sobrenome:r.sobrenome||"",email:r.email||"",phone:r.phone||"",avatarId:r.avatarId||"",avatarSource:r.avatarSource||"",birthDate:r.birthDate||"",createdAt:o,ultimoAcesso:function(e){if(!e||isNaN(e))return"Sem registro";try{let t=new Date(e);if(isNaN(t.getTime()))return"Sem registro";let r=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear(),i=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return"".concat(r,"/").concat(a,"/").concat(o," \xe0s ").concat(i,":").concat(n)}catch(e){return console.error("Erro ao formatar data:",e),"Sem registro"}}(o),points:a,desempenho:a>=150?"Bom":a>=100?"M\xe9dio":"Ruim"}}).sort((e,t)=>t.createdAt-e.createdAt).slice(0,e||t.length);r(o)}else r([])}catch(e){console.error("Erro ao buscar usu\xe1rios:",e),r([])}finally{s(!1)}})()},[e]),{users:t,loading:n,setUsers:r}}},30456:function(e,t,r){r.d(t,{$4:function(){return s},HX:function(){return i},XK:function(){return n}});var a=r(53375);let o={primary:[235,93,28],text:[0,0,0],subtitle:[100,100,100],line:[220,220,220],white:[255,255,255],lightGray:[245,245,245],border:[200,200,200],footer:[150,150,150]},i=e=>{let t=new a.kH("landscape");t.setFontSize(20),t.setTextColor(o.primary[0],o.primary[1],o.primary[2]),t.text("Lista Completa de Usu\xe1rios",148,15,{align:"center"}),t.setFontSize(10),t.setTextColor(o.subtitle[0],o.subtitle[1],o.subtitle[2]),t.text("Gerado em: ".concat(new Date().toLocaleDateString()," \xe0s ").concat(new Date().toLocaleTimeString()),148,22,{align:"center"}),t.setDrawColor(o.line[0],o.line[1],o.line[2]),t.line(10,25,285,25),t.setFontSize(12),t.setTextColor(o.text[0],o.text[1],o.text[2]),t.text("Total de usu\xe1rios: ".concat(e.length),10,35);let r=45,i=[65,95,30,35,40];i.reduce((e,t)=>e+t,0),t.setFillColor(o.primary[0],o.primary[1],o.primary[2]),t.rect(10,r,i[0],12,"F"),t.rect(10+i[0],r,i[1],12,"F"),t.rect(10+i[0]+i[1],r,i[2],12,"F"),t.rect(10+i[0]+i[1]+i[2],r,i[3],12,"F"),t.rect(10+i[0]+i[1]+i[2]+i[3],r,i[4],12,"F"),t.setTextColor(o.white[0],o.white[1],o.white[2]),t.setFontSize(10),t.text("Nome",14,r+6.5),t.text("Email",10+i[0]+4,r+6.5),t.text("Pontos",10+i[0]+i[1]+4,r+6.5),t.text("Desempenho",10+i[0]+i[1]+i[2]+4,r+6.5),t.text("Data de Cadastro",10+i[0]+i[1]+i[2]+i[3]+4,r+6.5),r+=12,t.setTextColor(o.text[0],o.text[1],o.text[2]),t.setFontSize(8);let n=1;e.forEach((e,a)=>{var s;a>0&&a%16==0&&(t.setFontSize(8),t.setTextColor(o.subtitle[0],o.subtitle[1],o.subtitle[2]),t.text("P\xe1gina ".concat(n),148,195,{align:"center"}),t.addPage("landscape"),n++,r=20,t.setFillColor(o.primary[0],o.primary[1],o.primary[2]),t.rect(10,r,i[0],12,"F"),t.rect(10+i[0],r,i[1],12,"F"),t.rect(10+i[0]+i[1],r,i[2],12,"F"),t.rect(10+i[0]+i[1]+i[2],r,i[3],12,"F"),t.rect(10+i[0]+i[1]+i[2]+i[3],r,i[4],12,"F"),t.setTextColor(o.white[0],o.white[1],o.white[2]),t.setFontSize(10),t.text("Nome",14,r+6.5),t.text("Email",10+i[0]+4,r+6.5),t.text("Pontos",10+i[0]+i[1]+4,r+6.5),t.text("Desempenho",10+i[0]+i[1]+i[2]+4,r+6.5),t.text("Data de Cadastro",10+i[0]+i[1]+i[2]+i[3]+4,r+6.5),r+=12,t.setTextColor(o.text[0],o.text[1],o.text[2]),t.setFontSize(8)),a%2==0?t.setFillColor(o.lightGray[0],o.lightGray[1],o.lightGray[2]):t.setFillColor(o.white[0],o.white[1],o.white[2]),t.rect(10,r,i[0],12,"F"),t.rect(10+i[0],r,i[1],12,"F"),t.rect(10+i[0]+i[1],r,i[2],12,"F"),t.rect(10+i[0]+i[1]+i[2],r,i[3],12,"F"),t.rect(10+i[0]+i[1]+i[2]+i[3],r,i[4],12,"F"),t.setDrawColor(o.border[0],o.border[1],o.border[2]),t.rect(10,r,i[0],12,"S"),t.rect(10+i[0],r,i[1],12,"S"),t.rect(10+i[0]+i[1],r,i[2],12,"S"),t.rect(10+i[0]+i[1]+i[2],r,i[3],12,"S"),t.rect(10+i[0]+i[1]+i[2]+i[3],r,i[4],12,"S");let c="".concat(e.nome," ").concat(e.sobrenome||"").length>35?"".concat(e.nome," ").concat(e.sobrenome||"").substring(0,32)+"...":"".concat(e.nome," ").concat(e.sobrenome||"");t.text(c,14,r+6.5),t.text(e.email||"N/A",10+i[0]+4,r+6.5),t.text((null===(s=e.points)||void 0===s?void 0:s.toString())||"0",10+i[0]+i[1]+4,r+6.5),t.text(e.desempenho||"N/A",10+i[0]+i[1]+i[2]+4,r+6.5),t.text(l(e.createdAt)||"N/A",10+i[0]+i[1]+i[2]+i[3]+4,r+6.5),r+=12}),t.setFontSize(8),t.setTextColor(o.subtitle[0],o.subtitle[1],o.subtitle[2]),t.text("P\xe1gina ".concat(n," de ").concat(n),148,195,{align:"center"}),t.text("\xa9 UIDO",148,200,{align:"center"}),t.save("lista-completa-usuarios.pdf")},n=(e,t,r,i)=>{let n=new a.kH;n.setFontSize(20),n.setTextColor(o.primary[0],o.primary[1],o.primary[2]),n.text("Relat\xf3rio Geral UIDO",105,15,{align:"center"}),n.setFontSize(10),n.setTextColor(o.subtitle[0],o.subtitle[1],o.subtitle[2]),n.text("Gerado em: ".concat(new Date().toLocaleDateString()," \xe0s ").concat(new Date().toLocaleTimeString()),105,22,{align:"center"}),n.setDrawColor(o.line[0],o.line[1],o.line[2]),n.line(20,25,190,25),n.setFontSize(14),n.setTextColor(o.text[0],o.text[1],o.text[2]),n.text("Estat\xedsticas Gerais",20,35);let s=40;n.setFillColor(o.primary[0],o.primary[1],o.primary[2]),n.rect(20,s,85,10,"F"),n.rect(105,s,85,10,"F"),n.setTextColor(o.white[0],o.white[1],o.white[2]),n.setFontSize(11),n.text("M\xe9trica",25,s+5.5),n.text("Valor",110,s+5.5),s+=10;let l=[["Total de Usu\xe1rios",e.toString()],["Total de Trilhas",t.toString()],["Total de Etapas",r.toString()],["M\xe9dia de Etapas por Trilha",(r/(t||1)).toFixed(2)]];if(n.setTextColor(o.text[0],o.text[1],o.text[2]),l.forEach((e,t)=>{t%2==0?n.setFillColor(o.lightGray[0],o.lightGray[1],o.lightGray[2]):n.setFillColor(o.white[0],o.white[1],o.white[2]),n.rect(20,s,85,10,"F"),n.rect(105,s,85,10,"F"),n.setDrawColor(o.border[0],o.border[1],o.border[2]),n.rect(20,s,85,10,"S"),n.rect(105,s,85,10,"S"),n.text(e[0],25,s+5.5),n.text(e[1],110,s+5.5),s+=10}),s+=15,n.setFontSize(14),n.text("An\xe1lise de Trilhas",20,s),s+=10,i&&i.length>0){n.setFillColor(o.primary[0],o.primary[1],o.primary[2]),n.rect(20,s,120,10,"F"),n.rect(140,s,50,10,"F"),n.setTextColor(o.white[0],o.white[1],o.white[2]),n.setFontSize(11),n.text("Nome da Trilha",25,s+5.5),n.text("Qtd. Etapas",145,s+5.5),s+=10,n.setTextColor(o.text[0],o.text[1],o.text[2]);let e=Math.floor((270-s)/10),t=0;i.forEach((r,a)=>{var i;t>=e&&(n.addPage(),s=20,t=0),a%2==0?n.setFillColor(o.lightGray[0],o.lightGray[1],o.lightGray[2]):n.setFillColor(o.white[0],o.white[1],o.white[2]),n.rect(20,s,120,10,"F"),n.rect(140,s,50,10,"F"),n.setDrawColor(o.border[0],o.border[1],o.border[2]),n.rect(20,s,120,10,"S"),n.rect(140,s,50,10,"S");let l=r.nome.length>50?r.nome.substring(0,47)+"...":r.nome;n.text(l,25,s+5.5),n.text(((null===(i=r.etapas)||void 0===i?void 0:i.length)||0).toString(),145,s+5.5),s+=10,t++})}else n.text("Nenhuma trilha encontrada.",20,s+10),s+=20;s+=15,n.setFontSize(14),n.text("Desempenho dos Usu\xe1rios",20,s),s+=7,n.setFontSize(11),n.text("Esta se\xe7\xe3o apresenta um resumo do desempenho dos usu\xe1rios na plataforma.",20,s);let c=n.getNumberOfPages();for(let e=1;e<=c;e++)n.setPage(e),n.setFontSize(10),n.setTextColor(o.footer[0],o.footer[1],o.footer[2]),n.text("P\xe1gina ".concat(e," de ").concat(c),105,285,{align:"center"}),n.text("\xa9 UIDO",105,290,{align:"center"});n.save("dashboard-report.pdf")},s=e=>{let t=new a.kH;t.setFontSize(20),t.setTextColor(o.primary[0],o.primary[1],o.primary[2]),t.text("Relat\xf3rio do Cliente: ".concat(e.nome," ").concat(e.sobrenome||""),105,15,{align:"center"}),t.setFontSize(10),t.setTextColor(o.subtitle[0],o.subtitle[1],o.subtitle[2]),t.text("Gerado em: ".concat(new Date().toLocaleDateString()," \xe0s ").concat(new Date().toLocaleTimeString()),105,22,{align:"center"}),t.setDrawColor(o.line[0],o.line[1],o.line[2]),t.line(20,25,190,25),t.setFontSize(14),t.setTextColor(o.text[0],o.text[1],o.text[2]),t.text("Informa\xe7\xf5es Pessoais",20,35);let r=40;t.setFillColor(o.primary[0],o.primary[1],o.primary[2]),t.rect(20,r,85,8,"F"),t.rect(105,r,85,8,"F"),t.setTextColor(o.white[0],o.white[1],o.white[2]),t.setFontSize(11),t.text("Campo",25,r+5.5),t.text("Valor",110,r+5.5),r+=8;let i=[["Nome Completo","".concat(e.nome," ").concat(e.sobrenome||"")],["Email",e.email],["Telefone",e.phone||"N\xe3o informado"],["Data de Nascimento",e.birthDate||"N\xe3o informada"],["Data de Cadastro",l(e.createdAt)],["\xdaltimo Acesso",e.ultimoAcesso]];t.setTextColor(o.text[0],o.text[1],o.text[2]),i.forEach((e,a)=>{a%2==0?t.setFillColor(o.lightGray[0],o.lightGray[1],o.lightGray[2]):t.setFillColor(o.white[0],o.white[1],o.white[2]),t.rect(20,r,85,8,"F"),t.rect(105,r,85,8,"F"),t.setDrawColor(o.border[0],o.border[1],o.border[2]),t.rect(20,r,85,8,"S"),t.rect(105,r,85,8,"S"),t.text(e[0],25,r+5.5),t.text(e[1],110,r+5.5),r+=8}),r+=15,t.setFontSize(14),t.text("Desempenho na Plataforma",20,r),r+=10,t.setFillColor(o.primary[0],o.primary[1],o.primary[2]),t.rect(20,r,85,8,"F"),t.rect(105,r,85,8,"F"),t.setTextColor(o.white[0],o.white[1],o.white[2]),t.text("M\xe9trica",25,r+5.5),t.text("Valor",110,r+5.5),r+=8,t.setTextColor(o.text[0],o.text[1],o.text[2]),[["Pontua\xe7\xe3o Total",e.points.toString()],["Classifica\xe7\xe3o",e.desempenho],["Status",function(e){switch(e){case"Bom":return"Excelente progresso";case"M\xe9dio":return"Progresso satisfat\xf3rio";case"Ruim":return"Necessita aten\xe7\xe3o";default:return"N\xe3o avaliado"}}(e.desempenho)]].forEach((e,a)=>{a%2==0?t.setFillColor(o.lightGray[0],o.lightGray[1],o.lightGray[2]):t.setFillColor(o.white[0],o.white[1],o.white[2]),t.rect(20,r,85,8,"F"),t.rect(105,r,85,8,"F"),t.setDrawColor(o.border[0],o.border[1],o.border[2]),t.rect(20,r,85,8,"S"),t.rect(105,r,85,8,"S"),t.text(e[0],25,r+5.5),t.text(e[1],110,r+5.5),r+=8}),r+=15,t.setFontSize(14),t.text("Recomenda\xe7\xf5es",20,r),r+=7,t.setFontSize(11);let n=function(e){switch(e){case"Bom":return"O usu\xe1rio est\xe1 com \xf3timo desempenho. Recomenda-se desafios mais avan\xe7ados e possivelmente atribuir papel de mentor para outros usu\xe1rios.";case"M\xe9dio":return"O usu\xe1rio est\xe1 progredindo bem. Recomenda-se revisar os conte\xfados onde teve mais dificuldade e incentivar a participa\xe7\xe3o em mais atividades interativas.";case"Ruim":return"O usu\xe1rio precisa de aten\xe7\xe3o especial. Recomenda-se uma revis\xe3o completa do material b\xe1sico, acompanhamento personalizado e defini\xe7\xe3o de metas de curto prazo.";default:return"N\xe3o h\xe1 recomenda\xe7\xf5es dispon\xedveis para este usu\xe1rio."}}(e.desempenho),s=t.splitTextToSize(n,170);t.text(s,20,r);let c=t.getNumberOfPages();for(let e=1;e<=c;e++)t.setPage(e),t.setFontSize(10),t.setTextColor(o.footer[0],o.footer[1],o.footer[2]),t.text("P\xe1gina ".concat(e," de ").concat(c),105,285,{align:"center"}),t.text("\xa9 UIDO",105,290,{align:"center"});t.save("relatorio-".concat(e.nome.toLowerCase(),"-").concat(e.id,".pdf"))};function l(e){if(!e)return"N\xe3o informada";let t=new Date(e),r=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();return"".concat(r,"/").concat(a,"/").concat(o)}}}]);