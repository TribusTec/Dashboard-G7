(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{37729:function(e,s,a){Promise.resolve().then(a.bind(a,35739))},35739:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return D}});var t=a(57437),l=a(79820),r=a(96246),n=a(69174),c=a(12381),i=a(68245),d=a(40279),o=a(15291),m=a(7204),x=a(17168),h=a(70525),j=a(21047),u=a(3085),p=a(49474),N=a(73247),v=a(96215),f=a(71769),g=a(91723),b=a(48736),y=a(49724),w=a(64381),M=a(10549),S=a(434),T=a(69140),C=a(33804),A=a(2265),O=a(27648),Z=a(99544);let E=e=>{if(e<60)return"".concat(e,"s");let s=Math.floor(e/60),a=e%60;if(s<60)return a>0?"".concat(s,"min ").concat(a,"s"):"".concat(s,"min");let t=Math.floor(s/60),l=s%60;return l>0?"".concat(t,"h ").concat(l,"min"):"".concat(t,"h")},q=e=>{if(e<60)return"".concat(e,"s");let s=Math.floor(e/60),a=e%60;return a>0?"".concat(s,"min ").concat(a,"s"):"".concat(s,"min")},I=[{id:"1",source:"avatar1",image:"/avatars/avatar1.png"},{id:"2",source:"avatar2",image:"/avatars/avatar2.png"},{id:"3",source:"avatar3",image:"/avatars/avatar3.png"},{id:"4",source:"avatar4",image:"/avatars/avatar4.png"}];function F(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(T.O,{className:"h-8 w-48 mb-2"}),(0,t.jsx)(T.O,{className:"h-4 w-80"})]})}),(0,t.jsx)(l.Zb,{children:(0,t.jsx)(l.aY,{className:"p-6",children:(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3",children:[(0,t.jsx)(T.O,{className:"w-6 h-6"}),(0,t.jsx)(T.O,{className:"w-10 h-10 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(T.O,{className:"h-4 w-32 mb-1"}),(0,t.jsx)(T.O,{className:"h-3 w-24"})]}),(0,t.jsx)(T.O,{className:"h-5 w-12"})]},e))})})})]})}function Q(){var e,s;let{users:a,loading:M}=(0,w.U)(null),{trilhas:S,isLoading:T}=(0,Z.w)(),[Q,D]=(0,A.useState)([]),[P,R]=(0,A.useState)(""),[Y,k]=(0,A.useState)("todos"),[U,$]=(0,A.useState)("todas"),[B,L]=(0,A.useState)("todas"),V=S.reduce((e,s)=>{var a;return e[s.id]={nome:s.nome,etapas:(null===(a=s.etapas)||void 0===a?void 0:a.map(e=>e.titulo))||[]},e},{}),_=e=>{Q.find(s=>s.id===e.id)?D(Q.filter(s=>s.id!==e.id)):Q.length<6&&D([...Q,e])},G=e=>{if(!e)return"U";let s=e.split(" ");return 1===s.length?s[0].charAt(0).toUpperCase():(s[0].charAt(0)+s[s.length-1].charAt(0)).toUpperCase()},z=e=>{let s=I.find(s=>s.id===e);return s?s.image:null},H=e=>{switch(e){case"Bom":return"text-green-600";case"M\xe9dio":return"text-yellow-600";default:return"text-red-600"}},X=e=>{switch(e){case"Bom":return(0,t.jsx)(h.Z,{className:"w-4 h-4"});case"M\xe9dio":return(0,t.jsx)(j.Z,{className:"w-4 h-4"});default:return(0,t.jsx)(u.Z,{className:"w-4 h-4"})}};if(M||T||!a)return(0,t.jsx)(F,{});let J=a.filter(e=>{var s,a,t,l;if(!e||!e.nome)return!1;let r=!P||(null===(s=e.nome)||void 0===s?void 0:s.toLowerCase().includes(P.toLowerCase()))||(null===(a=e.sobrenome)||void 0===a?void 0:a.toLowerCase().includes(P.toLowerCase()))||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(P.toLowerCase())),n="todos"===Y||(null===(l=e.desempenho)||void 0===l?void 0:l.toLowerCase())===Y.toLowerCase();return r&&n}),K=Q.map(e=>{let s={};Object.keys(V).forEach(a=>{var t;let l=(null===(t=e.trilhas)||void 0===t?void 0:t[a])||{};s[a]={completed:l.completed||!1,timeSpent:l.timeSpent||Math.floor(1800*Math.random())+300,questionsAnswered:l.questionsAnswered||Math.floor(15*Math.random())+5,questionsCorrect:l.questionsCorrect||Math.floor(12*Math.random())+3,etapas:l.etapas||{etapa_1:{completed:Math.random()>.3,timeSpent:Math.floor(600*Math.random())+180,questionsAnswered:Math.floor(5*Math.random())+2,questionsCorrect:Math.floor(4*Math.random())+1}}}}),Object.keys(s).forEach(e=>{let a=s[e];a.completionRate=a.questionsAnswered>0?a.questionsCorrect/a.questionsAnswered*100:0});let a=Object.values(s).reduce((e,s)=>e+s.timeSpent,0),t=Object.values(s).reduce((e,s)=>e+s.questionsAnswered,0),l=Object.fromEntries(Object.entries(s).map(e=>{var s;let[a,t]=e;return[a,{...t,completionRate:null!==(s=t.completionRate)&&void 0!==s?s:0}]}));return{userId:e.id,nome:e.nome,sobrenome:e.sobrenome,email:e.email,avatarId:e.avatarId,points:e.points,desempenho:e.desempenho,trilhas:l,averageTimePerQuestion:t>0?Math.floor(a/t):0,totalTimeSpent:a,completionRate:Math.floor(40*Math.random())+60}});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Compara\xe7\xe3o de Usu\xe1rios"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Compare o desempenho detalhado entre usu\xe1rios"})]}),(0,t.jsx)("div",{className:"flex gap-3",children:(0,t.jsx)(O.default,{href:"/Ranking",children:(0,t.jsxs)(c.z,{variant:"default",className:"bg-marca hover:bg-marca/80",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Ver Ranking"]})})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Filtros"})}),(0,t.jsx)(l.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Desempenho"}),(0,t.jsxs)(o.Ph,{value:Y,onValueChange:k,children:[(0,t.jsx)(o.i4,{children:(0,t.jsx)(o.ki,{placeholder:"Filtrar por..."})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"todos",children:"Todos"}),(0,t.jsx)(o.Ql,{value:"bom",children:"Bom"}),(0,t.jsx)(o.Ql,{value:"m\xe9dio",children:"M\xe9dio"}),(0,t.jsx)(o.Ql,{value:"ruim",children:"Ruim"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Buscar"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)(d.I,{placeholder:"Nome, email...",value:P,onChange:e=>R(e.target.value),className:"pl-10"})]})]})]})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Selecionar Usu\xe1rios para Compara\xe7\xe3o"}),(0,t.jsxs)(n.C,{variant:"secondary",children:[Q.length,"/6 selecionados"]})]})}),(0,t.jsx)(l.aY,{children:(0,t.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[J.map(e=>{if(!e||!e.nome)return null;let s=Q.some(s=>s.id===e.id);return(0,t.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg border cursor-pointer transition-colors ".concat(s?"bg-marca/5 border-marca":"hover:bg-gray-50"),onClick:()=>_(e),children:[(0,t.jsx)(i.X,{checked:s,onCheckedChange:()=>_(e),disabled:!s&&Q.length>=6,className:"border-2 border-gray-300 data-[state=checked]:bg-marca data-[state=checked]:border-marca"}),(0,t.jsxs)(r.qE,{className:"w-10 h-10 border-2 border-gray-200",children:[e.avatarId?(0,t.jsx)(r.F$,{src:z(e.avatarId)||"",alt:e.nome}):(0,t.jsx)(r.F$,{src:"/avatars/avatar1.png",alt:"Avatar padr\xe3o"}),(0,t.jsx)(r.Q5,{className:"bg-marca text-white text-sm",children:G(e.nome)})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"font-medium capitalize",children:[e.nome," ",e.sobrenome]}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:H(e.desempenho),children:X(e.desempenho)}),(0,t.jsx)(n.C,{variant:"Bom"===e.desempenho?"default":"M\xe9dio"===e.desempenho?"secondary":"destructive",className:"text-xs ".concat("Bom"===e.desempenho?"bg-marca hover:bg-marca/90":""),children:e.desempenho})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-bold text-lg",children:e.points}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"pontos"})]})]},e.id)}),0===J.length&&(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Nenhum usu\xe1rio encontrado com os filtros aplicados"})]})})]}),Q.length>=2&&(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"w-5 h-5 text-marca"}),"An\xe1lise Comparativa (",Q.length," usu\xe1rios)"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsxs)(x.mQ,{defaultValue:"overview",className:"w-full",children:[(0,t.jsxs)(x.dr,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(x.SP,{value:"overview",children:"Vis\xe3o Geral"}),(0,t.jsx)(x.SP,{value:"trilhas",children:"Por Trilha"}),(0,t.jsx)(x.SP,{value:"tempo",children:"Tempo"}),(0,t.jsx)(x.SP,{value:"detalhado",children:"Detalhado"})]}),(0,t.jsxs)(x.nU,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsx)(l.Zb,{className:"text-center",children:(0,t.jsxs)(l.aY,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-marca mb-1",children:Math.max(...K.map(e=>e.points))}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Maior Pontua\xe7\xe3o"})]})}),(0,t.jsx)(l.Zb,{className:"text-center",children:(0,t.jsxs)(l.aY,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-700 mb-1",children:Math.round(K.reduce((e,s)=>e+s.points,0)/K.length)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"M\xe9dia do Grupo"})]})}),(0,t.jsx)(l.Zb,{className:"text-center",children:(0,t.jsxs)(l.aY,{className:"p-4",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[Math.round(K.reduce((e,s)=>e+s.completionRate,0)/K.length),"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Taxa de Conclus\xe3o"})]})}),(0,t.jsx)(l.Zb,{className:"text-center",children:(0,t.jsxs)(l.aY,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:q(Math.round(K.reduce((e,s)=>e+s.averageTimePerQuestion,0)/K.length))}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Tempo M\xe9dio/Quest\xe3o"})]})})]}),(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsxs)(C.iA,{children:[(0,t.jsx)(C.xD,{children:(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.ss,{children:"Usu\xe1rio"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Pontos"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Desempenho"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Conclus\xe3o"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Tempo Total"})]})}),(0,t.jsx)(C.RM,{children:K.map(e=>(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(r.qE,{className:"w-8 h-8",children:[e.avatarId?(0,t.jsx)(r.F$,{src:z(e.avatarId)||"",alt:e.nome}):(0,t.jsx)(r.F$,{src:"/avatars/avatar1.png",alt:"Avatar padr\xe3o"}),(0,t.jsx)(r.Q5,{className:"text-xs",children:G(e.nome)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.nome}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.email})]})]})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsx)("div",{className:"font-bold text-lg",children:e.points})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)("div",{className:H(e.desempenho),children:X(e.desempenho)}),(0,t.jsx)(n.C,{variant:"Bom"===e.desempenho?"default":"M\xe9dio"===e.desempenho?"secondary":"destructive",className:"text-xs ".concat("Bom"===e.desempenho?"bg-marca hover:bg-marca/90":""),children:e.desempenho})]})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-medium",children:[e.completionRate,"%"]}),(0,t.jsx)(m.E,{value:e.completionRate,className:"h-2 w-16 mx-auto"})]})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsx)("div",{className:"font-medium",children:E(e.totalTimeSpent)})})]},e.userId))})]})})]}),(0,t.jsxs)(x.nU,{value:"trilhas",className:"space-y-4",children:[(0,t.jsx)(l.Zb,{children:(0,t.jsx)(l.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Trilha"}),(0,t.jsxs)(o.Ph,{value:U,onValueChange:$,children:[(0,t.jsx)(o.i4,{children:(0,t.jsx)(o.ki,{placeholder:"Selecionar trilha..."})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"todas",children:"Todas as Trilhas"}),S.map(e=>(0,t.jsx)(o.Ql,{value:e.id,children:e.nome},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Etapa"}),(0,t.jsxs)(o.Ph,{value:B,onValueChange:L,children:[(0,t.jsx)(o.i4,{children:(0,t.jsx)(o.ki,{placeholder:"Selecionar etapa..."})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"todas",children:"Todas as Etapas"}),"todas"!==U&&(null===(s=S.find(e=>e.id===U))||void 0===s?void 0:null===(e=s.etapas)||void 0===e?void 0:e.map((e,s)=>(0,t.jsx)(o.Ql,{value:e.id,children:e.titulo},e.id)))]})]})]})]})})}),(0,t.jsxs)("div",{className:"space-y-6",children:[Object.entries(V).filter(e=>{let[s]=e;return"todas"===U||s===U}).map(e=>{let[s,a]=e,c=K.map(e=>{let a=e.trilhas[s]||{completed:!1,timeSpent:0,questionsAnswered:0,questionsCorrect:0},t=a.questionsAnswered>0?a.questionsCorrect/a.questionsAnswered*100:0;return{...e,trilhaData:{...a,completionRate:t}}});return(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("h4",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"w-5 h-5 text-marca"}),a.nome]})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsxs)(C.iA,{children:[(0,t.jsx)(C.xD,{children:(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.ss,{children:"Usu\xe1rio"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Status"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Tempo Gasto"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Quest\xf5es"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Taxa de Acerto"})]})}),(0,t.jsx)(C.RM,{children:c.map(e=>(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(r.qE,{className:"w-8 h-8",children:[e.avatarId?(0,t.jsx)(r.F$,{src:z(e.avatarId)||"",alt:e.nome}):(0,t.jsx)(r.F$,{src:"/avatars/avatar1.png",alt:"Avatar padr\xe3o"}),(0,t.jsx)(r.Q5,{className:"text-xs",children:G(e.nome)})]}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"font-medium text-sm",children:e.nome})})]})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsx)(n.C,{variant:e.trilhaData.completed?"default":"secondary",children:e.trilhaData.completed?"Conclu\xedda":"Em Progresso"})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsx)("div",{className:"font-medium",children:E(e.trilhaData.timeSpent)})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"text-sm",children:[e.trilhaData.questionsCorrect,"/",e.trilhaData.questionsAnswered]})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-medium",children:[(e.trilhaData.completionRate||0).toFixed(1),"%"]}),(0,t.jsx)(m.E,{value:e.trilhaData.completionRate,className:"h-2 w-16 mx-auto"})]})})]},e.userId))})]})})})]},s)}),0===Object.entries(V).filter(e=>{let[s]=e;return"todas"===U||s===U}).length&&(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(f.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Nenhuma trilha encontrada"}),(0,t.jsx)("p",{children:"Nenhuma trilha corresponde aos filtros selecionados."})]})]})]}),(0,t.jsxs)(x.nU,{value:"tempo",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("h4",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"w-5 h-5 text-marca"}),"Tempo Total de Estudo"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:K.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(r.qE,{className:"w-8 h-8",children:[e.avatarId?(0,t.jsx)(r.F$,{src:z(e.avatarId)||"",alt:e.nome}):(0,t.jsx)(r.F$,{src:"/avatars/avatar1.png",alt:"Avatar padr\xe3o"}),(0,t.jsx)(r.Q5,{className:"text-xs",children:G(e.nome)})]}),(0,t.jsx)("span",{className:"font-medium",children:e.nome})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-bold text-lg",children:E(e.totalTimeSpent)}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"tempo total"})]})]},e.userId))})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("h4",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"w-5 h-5 text-marca"}),"Tempo M\xe9dio por Quest\xe3o"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:K.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(r.qE,{className:"w-8 h-8",children:[e.avatarId?(0,t.jsx)(r.F$,{src:z(e.avatarId)||"",alt:e.nome}):(0,t.jsx)(r.F$,{src:"/avatars/avatar1.png",alt:"Avatar padr\xe3o"}),(0,t.jsx)(r.Q5,{className:"text-xs",children:G(e.nome)})]}),(0,t.jsx)("span",{className:"font-medium",children:e.nome})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-bold text-lg",children:q(e.averageTimePerQuestion)}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"por quest\xe3o"})]})]},e.userId))})})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsx)("h4",{className:"text-lg font-semibold",children:"Tempo Gasto por Trilha"})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsxs)(C.iA,{children:[(0,t.jsx)(C.xD,{children:(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.ss,{children:"Usu\xe1rio"}),Object.entries(V).filter(e=>{let[s]=e;return"todas"===U||s===U}).map(e=>{let[,s]=e;return(0,t.jsx)(C.ss,{className:"text-center",children:s.nome},s.nome)})]})}),(0,t.jsx)(C.RM,{children:K.map(e=>(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(r.qE,{className:"w-8 h-8",children:[e.avatarId?(0,t.jsx)(r.F$,{src:z(e.avatarId)||"",alt:e.nome}):(0,t.jsx)(r.F$,{src:"/avatars/avatar1.png",alt:"Avatar padr\xe3o"}),(0,t.jsx)(r.Q5,{className:"text-xs",children:G(e.nome)})]}),(0,t.jsx)("span",{className:"font-medium text-sm",children:e.nome})]})}),Object.entries(V).filter(e=>{let[s]=e;return"todas"===U||s===U}).map(s=>{var a;let[l]=s;return(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsx)("div",{className:"font-medium",children:E((null===(a=e.trilhas[l])||void 0===a?void 0:a.timeSpent)||0)})},l)})]},e.userId))})]})})})]})]}),(0,t.jsxs)(x.nU,{value:"detalhado",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("h4",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"w-5 h-5 text-marca"}),"Distribui\xe7\xe3o de Desempenho"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:["Bom","M\xe9dio","Ruim"].map(e=>{let s=K.filter(s=>s.desempenho===e).length,a=K.length>0?s/K.length*100:0;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:e}),(0,t.jsxs)("span",{children:[s," usu\xe1rios (",a.toFixed(1),"%)"]})]}),(0,t.jsx)(m.E,{value:a,className:"h-2"})]},e)})})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("h4",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"w-5 h-5 text-marca"}),"Estat\xedsticas de Tempo"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Tempo Total M\xe9dio:"}),(0,t.jsx)("span",{className:"font-medium",children:E(Math.round(K.reduce((e,s)=>e+s.totalTimeSpent,0)/K.length))})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Maior Tempo:"}),(0,t.jsx)("span",{className:"font-medium",children:E(Math.max(...K.map(e=>e.totalTimeSpent)))})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Menor Tempo:"}),(0,t.jsx)("span",{className:"font-medium",children:E(Math.min(...K.map(e=>e.totalTimeSpent)))})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Tempo/Quest\xe3o M\xe9dio:"}),(0,t.jsx)("span",{className:"font-medium",children:q(Math.round(K.reduce((e,s)=>e+s.averageTimePerQuestion,0)/K.length))})]})]})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("h4",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"w-5 h-5 text-marca"}),"Estat\xedsticas de Pontua\xe7\xe3o"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Pontua\xe7\xe3o M\xe9dia:"}),(0,t.jsxs)("span",{className:"font-medium",children:[Math.round(K.reduce((e,s)=>e+s.points,0)/K.length)," pts"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Maior Pontua\xe7\xe3o:"}),(0,t.jsxs)("span",{className:"font-medium",children:[Math.max(...K.map(e=>e.points))," pts"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Menor Pontua\xe7\xe3o:"}),(0,t.jsxs)("span",{className:"font-medium",children:[Math.min(...K.map(e=>e.points))," pts"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Desvio Padr\xe3o:"}),(0,t.jsxs)("span",{className:"font-medium",children:[(()=>{let e=K.reduce((e,s)=>e+s.points,0)/K.length;return Math.round(Math.sqrt(K.reduce((s,a)=>s+Math.pow(a.points-e,2),0)/K.length))})()," pts"]})]})]})})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsx)("h4",{className:"text-lg font-semibold",children:"An\xe1lise Detalhada por Usu\xe1rio"})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsxs)(C.iA,{children:[(0,t.jsx)(C.xD,{children:(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.ss,{children:"Usu\xe1rio"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Pontos"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Tempo Total"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Tempo/Quest\xe3o"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Trilhas Conclu\xeddas"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Taxa M\xe9dia de Acerto"}),(0,t.jsx)(C.ss,{className:"text-center",children:"Efici\xeancia"})]})}),(0,t.jsx)(C.RM,{children:K.map(e=>{let s=Object.values(e.trilhas).filter(e=>e.completed).length,a=Object.keys(e.trilhas).length,l=Object.values(e.trilhas).reduce((e,s)=>e+s.completionRate,0)/a,n=e.points/(e.totalTimeSpent/60);return(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(r.qE,{className:"w-8 h-8",children:[e.avatarId?(0,t.jsx)(r.F$,{src:z(e.avatarId)||"",alt:e.nome}):(0,t.jsx)(r.F$,{src:"/avatars/avatar1.png",alt:"Avatar padr\xe3o"}),(0,t.jsx)(r.Q5,{className:"text-xs",children:G(e.nome)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.nome}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.desempenho})]})]})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsx)("div",{className:"font-bold",children:e.points})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsx)("div",{className:"font-medium",children:E(e.totalTimeSpent)})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsx)("div",{className:"font-medium",children:q(e.averageTimePerQuestion)})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-medium",children:[s,"/",a]}),(0,t.jsx)(m.E,{value:s/a*100,className:"h-2 w-16 mx-auto"})]})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"font-medium",children:[l.toFixed(1),"%"]})}),(0,t.jsx)(C.pj,{className:"text-center",children:(0,t.jsxs)("div",{className:"font-medium",children:[n.toFixed(1)," pts/min"]})})]},e.userId)})})]})})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsx)("h4",{className:"text-lg font-semibold",children:"Performance por Trilha"})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"space-y-6",children:Object.entries(V).map(e=>{let[s,a]=e,l=K.map(e=>e.trilhas[s]).filter(Boolean),r=l.reduce((e,s)=>e+s.timeSpent,0)/l.length,c=l.reduce((e,s)=>e+s.completionRate,0)/l.length,i=l.filter(e=>e.completed).length/l.length*100;return(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h5",{className:"font-semibold text-lg",children:a.nome}),(0,t.jsxs)(n.C,{variant:"outline",children:[l.length," usu\xe1rios"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-marca",children:E(Math.round(r))}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Tempo M\xe9dio"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[c.toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Taxa de Acerto"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[i.toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Taxa de Conclus\xe3o"})]})]})]},s)})})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("h4",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"w-5 h-5 text-marca"}),"Insights e Recomenda\xe7\xf5es"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:(()=>{let e=[],s=K.reduce((e,s)=>e+s.totalTimeSpent,0)/K.length;K.reduce((e,s)=>s.totalTimeSpent<e.totalTimeSpent?s:e);let a=K.reduce((e,s)=>s.totalTimeSpent>e.totalTimeSpent?s:e);a.totalTimeSpent>1.5*s&&e.push({type:"warning",title:"Disparidade de Tempo",description:"".concat(a.nome," est\xe1 levando ").concat(E(a.totalTimeSpent)," para completar, muito acima da m\xe9dia de ").concat(E(Math.round(s)),". Considere oferecer suporte adicional.")});let l=K.reduce((e,s)=>s.points>e.points?s:e),r=K.reduce((e,s)=>e+s.points,0)/K.length;l.points>1.3*r&&e.push({type:"success",title:"Destaque Positivo",description:"".concat(l.nome," est\xe1 se destacando com ").concat(l.points," pontos, bem acima da m\xe9dia de ").concat(Math.round(r)," pontos.")});let n=K.map(e=>({nome:e.nome,eff:e.points/(e.totalTimeSpent/60)})).reduce((e,s)=>s.eff>e.eff?s:e);return e.push({type:"info",title:"Maior Efici\xeancia",description:"".concat(n.nome," demonstra a maior efici\xeancia com ").concat(n.eff.toFixed(1)," pontos por minuto de estudo.")}),e.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 rounded-lg border-l-4 ".concat("success"===e.type?"bg-green-50 border-green-400":"warning"===e.type?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400"),children:[(0,t.jsx)("h6",{className:"font-semibold mb-1",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.description})]},s))})()})})]})]})]})})]}),Q.length<2&&(0,t.jsx)(l.Zb,{children:(0,t.jsxs)(l.aY,{className:"text-center py-16 space-y-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:(0,t.jsx)(y.Z,{className:"w-10 h-10 text-gray-400"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Selecione usu\xe1rios para comparar"}),(0,t.jsx)("p",{className:"text-gray-600 max-w-md mx-auto",children:"Escolha pelo menos 2 usu\xe1rios da lista acima para ver uma an\xe1lise comparativa detalhada do desempenho."})]})]})})]})}function D(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.V,{title:"Compara\xe7\xe3o de Usu\xe1rios"}),(0,t.jsx)(M.Y,{}),(0,t.jsx)("main",{className:"sm:ml-64 p-6",children:(0,t.jsx)(Q,{})})]})}},96246:function(e,s,a){"use strict";a.d(s,{F$:function(){return i},Q5:function(){return d},qE:function(){return c}});var t=a(57437),l=a(2265),r=a(61146),n=a(93448);let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.fC,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...l})});c.displayName=r.fC.displayName;let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.Ee,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",a),...l})});i.displayName=r.Ee.displayName;let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.NY,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...l})});d.displayName=r.NY.displayName},64381:function(e,s,a){"use strict";a.d(s,{U:function(){return n}});var t=a(2265),l=a(17292),r=a(52395);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,[s,a]=(0,t.useState)([]),[n,c]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{(async()=>{c(!0);try{let s=(0,l.iH)(r.Fs,"users"),t=await (0,l.U2)(s);if(t.exists()){let s=t.val(),l=Object.entries(s).map(e=>{let[s,a]=e,t=a.points||0,l=0;if(a.createdAt){if("number"==typeof a.createdAt)l=a.createdAt;else if("string"==typeof a.createdAt){let e=Number.parseInt(a.createdAt);isNaN(e)||(l=e)}}return{id:s,nome:a.nome||"Sem Nome",sobrenome:a.sobrenome||"",email:a.email||"",phone:a.phone||"",avatarId:a.avatarId||"",avatarSource:a.avatarSource||"",birthDate:a.birthDate||"",createdAt:l,ultimoAcesso:function(e){if(!e||isNaN(e))return"Sem registro";try{let s=new Date(e);if(isNaN(s.getTime()))return"Sem registro";let a=String(s.getDate()).padStart(2,"0"),t=String(s.getMonth()+1).padStart(2,"0"),l=s.getFullYear(),r=String(s.getHours()).padStart(2,"0"),n=String(s.getMinutes()).padStart(2,"0");return"".concat(a,"/").concat(t,"/").concat(l," \xe0s ").concat(r,":").concat(n)}catch(e){return console.error("Erro ao formatar data:",e),"Sem registro"}}(l),points:t,desempenho:t>=150?"Bom":t>=100?"M\xe9dio":"Ruim"}}).sort((e,s)=>s.createdAt-e.createdAt).slice(0,e||s.length);a(l)}else a([])}catch(e){console.error("Erro ao buscar usu\xe1rios:",e),a([])}finally{c(!1)}})()},[e]),{users:s,loading:n,setUsers:a}}}},function(e){e.O(0,[481,982,841,256,235,865,480,478,773,170,971,117,744],function(){return e(e.s=37729)}),_N_E=e.O()}]);